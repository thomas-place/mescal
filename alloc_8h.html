<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mescal: alloc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href=".custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mescal
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('alloc_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">alloc.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Macros et fonctions d'allocation mémoire.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div>
<p><a href="alloc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab1cd6d564a53c48b9fff06fc1b642a06" id="r_ab1cd6d564a53c48b9fff06fc1b642a06"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p,  num_objects)</td></tr>
<tr class="memdesc:ab1cd6d564a53c48b9fff06fc1b642a06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro pour allouer de la mémoire en utilisant la fonction malloc().  <br /></td></tr>
<tr class="separator:ab1cd6d564a53c48b9fff06fc1b642a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5038968dee3708c3e33a35f818c16452" id="r_a5038968dee3708c3e33a35f818c16452"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5038968dee3708c3e33a35f818c16452">CALLOC</a>(p,  num_objects)</td></tr>
<tr class="memdesc:a5038968dee3708c3e33a35f818c16452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro pour allouer de la mémoire en utilisant la fonction calloc().  <br /></td></tr>
<tr class="separator:a5038968dee3708c3e33a35f818c16452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698d049d23598a7e3997ecca97ac7e54" id="r_a698d049d23598a7e3997ecca97ac7e54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a698d049d23598a7e3997ecca97ac7e54">REALLOC</a>(p,  num_objects)</td></tr>
<tr class="memdesc:a698d049d23598a7e3997ecca97ac7e54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro pour réallouer de la mémoire en utilisant la fonction realloc().  <br /></td></tr>
<tr class="separator:a698d049d23598a7e3997ecca97ac7e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa44a749b8ec174a5780a521e07b9b86b" id="r_aa44a749b8ec174a5780a521e07b9b86b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b">CHECK_NULL</a>(n, ...)</td></tr>
<tr class="memdesc:aa44a749b8ec174a5780a521e07b9b86b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro permettant de tester si un ou plusieurs pointeurs sont NULL.  <br /></td></tr>
<tr class="separator:aa44a749b8ec174a5780a521e07b9b86b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4310f3e2cf0b85c13534389cc7479f33" id="r_a4310f3e2cf0b85c13534389cc7479f33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4310f3e2cf0b85c13534389cc7479f33">check_null</a> (const char *function, char *file, int line, int n,...)</td></tr>
<tr class="memdesc:a4310f3e2cf0b85c13534389cc7479f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ne pas utiliser cette fonction directement, mais à la place la macro <a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b" title="Macro permettant de tester si un ou plusieurs pointeurs sont NULL.">CHECK_NULL()</a>, qui indique dans le message la position de l'erreur dans le source.  <br /></td></tr>
<tr class="separator:a4310f3e2cf0b85c13534389cc7479f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95dd19b1b2af33029f7ccb78d5f17039" id="r_a95dd19b1b2af33029f7ccb78d5f17039"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95dd19b1b2af33029f7ccb78d5f17039">multiple_free</a> (void *p,...)</td></tr>
<tr class="memdesc:a95dd19b1b2af33029f7ccb78d5f17039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction pour libérer de la mémoire en utilisant la fonction free().  <br /></td></tr>
<tr class="separator:a95dd19b1b2af33029f7ccb78d5f17039"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macros et fonctions d'allocation mémoire. </p>
<p>Les macros <a class="el" href="#ab1cd6d564a53c48b9fff06fc1b642a06" title="Macro pour allouer de la mémoire en utilisant la fonction malloc().">MALLOC()</a>, <a class="el" href="#a5038968dee3708c3e33a35f818c16452" title="Macro pour allouer de la mémoire en utilisant la fonction calloc().">CALLOC()</a> et <a class="el" href="#a698d049d23598a7e3997ecca97ac7e54" title="Macro pour réallouer de la mémoire en utilisant la fonction realloc().">REALLOC()</a> définies dans ce fichier permettent d'allouer de la mémoire dynamiquement, en vérifiant que l'allocation a réussi. En cas d'échec, elles affichent un message d'erreur sur la sortie erreur, en indiquant la fonction, le fichier et la ligne où l'allocation a échoué, et quittent le programme.</p>
<p>La fonction <a class="el" href="#a95dd19b1b2af33029f7ccb78d5f17039" title="Fonction pour libérer de la mémoire en utilisant la fonction free().">multiple_free()</a> permet de libérer plusieurs pointeurs en un seul appel (mais attention, aucun de ces pointeurs ne doit être <code>NULL</code>, et tous doivent avoir été alloués dynamiquement avant cette libération).</p>
<p>La macro <a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b" title="Macro permettant de tester si un ou plusieurs pointeurs sont NULL.">CHECK_NULL()</a> permet de vérifier qu'un ou plusieurs pointeurs ne sont pas <code>NULL</code>.</p>
<p>La fonction <a class="el" href="#a4310f3e2cf0b85c13534389cc7479f33" title="Ne pas utiliser cette fonction directement, mais à la place la macro CHECK_NULL(),...">check_null()</a> n'est pas destinée à être utilisée directement, mais est utilisée par la macro <a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b" title="Macro permettant de tester si un ou plusieurs pointeurs sont NULL.">CHECK_NULL()</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5038968dee3708c3e33a35f818c16452" name="a5038968dee3708c3e33a35f818c16452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5038968dee3708c3e33a35f818c16452">&#9670;&#160;</a></span>CALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALLOC</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_objects</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                                                                \</div>
<div class="line">    DEBUG(<span class="stringliteral">&quot;Callocating  %lu objects.&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(num_objects)); \</div>
<div class="line">    <span class="keywordtype">void</span> *tmp = calloc((num_objects), <span class="keyword">sizeof</span> *(p));                   \</div>
<div class="line">    if (!tmp)                                                         \</div>
<div class="line">    FATAL(<span class="stringliteral">&quot;Calloc error.&quot;</span>);                                           \</div>
<div class="line">    (p) = tmp;                                                        \</div>
<div class="line">  }                                                                   \</div>
<div class="line">  while (0)</div>
</div><!-- fragment -->
<p>Macro pour allouer de la mémoire en utilisant la fonction calloc(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Pointeur à allouer. </td></tr>
    <tr><td class="paramname">num_objects</td><td>Nombre d'objets à allouer.</td></tr>
  </table>
  </dd>
</dl>
<p>Alloue de la mémoire initialisée à 0, permettant de stocker <code>num_objects</code>, chacun de type <code>*p</code>.</p>
<p><b>Exemple d'utilisation :</b> </p><div class="fragment"><div class="line">backmove *p;</div>
<div class="line"><a class="code hl_define" href="#a5038968dee3708c3e33a35f818c16452">CALLOC</a>(p, 10); <span class="comment">// Alloue un tableau de 10 backmove, initialisé à 0.</span></div>
<div class="ttc" id="aalloc_8h_html_a5038968dee3708c3e33a35f818c16452"><div class="ttname"><a href="#a5038968dee3708c3e33a35f818c16452">CALLOC</a></div><div class="ttdeci">#define CALLOC(p, num_objects)</div><div class="ttdoc">Macro pour allouer de la mémoire en utilisant la fonction calloc().</div><div class="ttdef"><b>Definition</b> alloc.h:91</div></div>
</div><!-- fragment --><p>Si l'allocation échoue, affiche un message d'erreur et quitte le programme.</p>
<dl class="section attention"><dt>Attention</dt><dd>Le pointeur <code>p</code> doit avoir été déclaré, mais ne pas pointer vers une zone déjà allouée dynamiquement (sous peine de créer une fuite mémoire). Si <code>p</code> pointe déjà vers une zone allouée dynamiquement, il faut utiliser REALLOC.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a698d049d23598a7e3997ecca97ac7e54" title="Macro pour réallouer de la mémoire en utilisant la fonction realloc().">REALLOC()</a> </dd></dl>

</div>
</div>
<a id="aa44a749b8ec174a5780a521e07b9b86b" name="aa44a749b8ec174a5780a521e07b9b86b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa44a749b8ec174a5780a521e07b9b86b">&#9670;&#160;</a></span>CHECK_NULL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_NULL</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code hl_function" href="alloc_8c.html#a4310f3e2cf0b85c13534389cc7479f33">check_null</a>                       \</div>
<div class="line">    (__func__, __FILE__, __LINE__, \</div>
<div class="line">    n __VA_OPT__( , ) __VA_ARGS__)</div>
<div class="ttc" id="aalloc_8c_html_a4310f3e2cf0b85c13534389cc7479f33"><div class="ttname"><a href="alloc_8c.html#a4310f3e2cf0b85c13534389cc7479f33">check_null</a></div><div class="ttdeci">void check_null(const char *function, char *file, int line, int n,...)</div><div class="ttdoc">Ne pas utiliser cette fonction directement, mais à la place la macro CHECK_NULL(),...</div><div class="ttdef"><b>Definition</b> alloc.c:18</div></div>
</div><!-- fragment -->
<p>Macro permettant de tester si un ou plusieurs pointeurs sont NULL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Nombre de pointeurs à tester. </td></tr>
    <tr><td class="paramname">...</td><td>Pointeurs à tester, en alternance avec des chaînes de caractères.</td></tr>
  </table>
  </dd>
</dl>
<p>Il doit y avoir un pointeur à tester pour chaque chaîne de caractères, et inversement.</p>
<p>La chaîne de caractères qui suit chaque pointeur permet de personnaliser le message d'erreur.</p>
<p><b>Exemple d'utilisation :</b> </p><div class="fragment"><div class="line"><a class="code hl_define" href="#aa44a749b8ec174a5780a521e07b9b86b">CHECK_NULL</a>(3, p1, <span class="stringliteral">&quot;Name1&quot;</span>, p2, <span class="stringliteral">&quot;Name2&quot;</span>, p3, <span class="stringliteral">&quot;Name3&quot;</span>);</div>
<div class="ttc" id="aalloc_8h_html_aa44a749b8ec174a5780a521e07b9b86b"><div class="ttname"><a href="#aa44a749b8ec174a5780a521e07b9b86b">CHECK_NULL</a></div><div class="ttdeci">#define CHECK_NULL(n,...)</div><div class="ttdoc">Macro permettant de tester si un ou plusieurs pointeurs sont NULL.</div><div class="ttdef"><b>Definition</b> alloc.h:168</div></div>
</div><!-- fragment --><p> Ici, 3 est le nombre de pointeurs à vérifier, et <code>p1</code>, <code>p2</code> et <code>p3</code> sont les pointeurs. Si <code>p1</code> et <code>p3</code> sont NULL, la macro affichera un message d'erreur de la forme :</p>
<p>[CRITICAL] Name1 is NULL!<br  />
 [CRITICAL] Name3 is NULL!</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a4310f3e2cf0b85c13534389cc7479f33" title="Ne pas utiliser cette fonction directement, mais à la place la macro CHECK_NULL(),...">check_null()</a> </dd></dl>

</div>
</div>
<a id="ab1cd6d564a53c48b9fff06fc1b642a06" name="ab1cd6d564a53c48b9fff06fc1b642a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1cd6d564a53c48b9fff06fc1b642a06">&#9670;&#160;</a></span>MALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MALLOC</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_objects</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                                                               \</div>
<div class="line">    DEBUG(<span class="stringliteral">&quot;Allocating  %lu objects.&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(num_objects)); \</div>
<div class="line">    <span class="keywordtype">void</span> *tmp = malloc(<span class="keyword">sizeof</span> *(p) * (num_objects));                 \</div>
<div class="line">    if (!tmp)                                                        \</div>
<div class="line">    FATAL(<span class="stringliteral">&quot;Malloc error.&quot;</span>);                                          \</div>
<div class="line">    (p) = tmp;                                                       \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>Macro pour allouer de la mémoire en utilisant la fonction malloc(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Pointeur à allouer. </td></tr>
    <tr><td class="paramname">num_objects</td><td>Nombre d'objets à allouer.</td></tr>
  </table>
  </dd>
</dl>
<p>Alloue de la mémoire permettant de stocker <code>num_objects</code>, chacun de type <code>*p</code>.</p>
<p><b>Exemple d'utilisation :</b> </p><div class="fragment"><div class="line">backmove *p;</div>
<div class="line"><a class="code hl_define" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p, 10); <span class="comment">// Alloue un tableau de 10 backmove.</span></div>
<div class="ttc" id="aalloc_8h_html_ab1cd6d564a53c48b9fff06fc1b642a06"><div class="ttname"><a href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a></div><div class="ttdeci">#define MALLOC(p, num_objects)</div><div class="ttdoc">Macro pour allouer de la mémoire en utilisant la fonction malloc().</div><div class="ttdef"><b>Definition</b> alloc.h:56</div></div>
</div><!-- fragment --><p>Si l'allocation échoue, affiche un message d'erreur et quitte le programme.</p>
<dl class="section attention"><dt>Attention</dt><dd>Le pointeur <code>p</code> doit avoir été déclaré, mais ne pas pointer vers une zone déjà allouée dynamiquement (sous peine de créer une fuite mémoire). Si <code>p</code> pointe déjà vers une zone allouée dynamiquement, il faut utiliser REALLOC.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a698d049d23598a7e3997ecca97ac7e54" title="Macro pour réallouer de la mémoire en utilisant la fonction realloc().">REALLOC()</a> </dd></dl>

</div>
</div>
<a id="a698d049d23598a7e3997ecca97ac7e54" name="a698d049d23598a7e3997ecca97ac7e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698d049d23598a7e3997ecca97ac7e54">&#9670;&#160;</a></span>REALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REALLOC</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_objects</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                                                                 \</div>
<div class="line">    DEBUG(<span class="stringliteral">&quot;Reallocating  %lu objects.&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(num_objects)); \</div>
<div class="line">    <span class="keywordtype">void</span> *tmp = realloc((p), <span class="keyword">sizeof</span> *(p) * (num_objects));             \</div>
<div class="line">    if (!tmp) {                                                        \</div>
<div class="line">      FATAL(<span class="stringliteral">&quot;Realloc error.&quot;</span>);                                         \</div>
<div class="line">    }                                                                  \</div>
<div class="line">    (p) = tmp;                                                         \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>Macro pour réallouer de la mémoire en utilisant la fonction realloc(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Pointeur à allouer. </td></tr>
    <tr><td class="paramname">num_objects</td><td>Nouveau nombre d'objets à allouer.</td></tr>
  </table>
  </dd>
</dl>
<p>Ré-alloue la mémoire pointée par un pointeur p, dont la valeur doit avoir été retournée précédemment par une fonction d'allocation dynamique (malloc, calloc, realloc ou une des macros de ce fichier).</p>
<p>Si l'allocation échoue, affiche un message d'erreur et quitte le programme.</p>
<p><b>Exemple d'utilisation :</b> </p><div class="fragment"><div class="line">backmove *p;</div>
<div class="line"><a class="code hl_define" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p, 10); <span class="comment">// Alloue un tableau de 10 backmove.</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code hl_define" href="#a698d049d23598a7e3997ecca97ac7e54">REALLOC</a>(p, 20); <span class="comment">// Ré-alloue un tableau de 20 backmove en copiant le tableau</span></div>
<div class="line">                <span class="comment">// précédent en début ce nouveay tableau, et affecte à p</span></div>
<div class="line">                <span class="comment">// l&#39;adresse de la première case de ce tableau.</span></div>
<div class="ttc" id="aalloc_8h_html_a698d049d23598a7e3997ecca97ac7e54"><div class="ttname"><a href="#a698d049d23598a7e3997ecca97ac7e54">REALLOC</a></div><div class="ttdeci">#define REALLOC(p, num_objects)</div><div class="ttdoc">Macro pour réallouer de la mémoire en utilisant la fonction realloc().</div><div class="ttdef"><b>Definition</b> alloc.h:131</div></div>
</div><!-- fragment --><p>Si l'allocation échoue, affiche un message d'erreur et quitte le programme.</p>
<dl class="section attention"><dt>Attention</dt><dd>Le pointeur <code>p</code> doit avoir été déclaré et pointer vers une zone déjà allouée dynamiquement.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ab1cd6d564a53c48b9fff06fc1b642a06" title="Macro pour allouer de la mémoire en utilisant la fonction malloc().">MALLOC()</a>, <a class="el" href="#a5038968dee3708c3e33a35f818c16452" title="Macro pour allouer de la mémoire en utilisant la fonction calloc().">CALLOC()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4310f3e2cf0b85c13534389cc7479f33" name="a4310f3e2cf0b85c13534389cc7479f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4310f3e2cf0b85c13534389cc7479f33">&#9670;&#160;</a></span>check_null()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_null </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>function</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>line</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>n</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ne pas utiliser cette fonction directement, mais à la place la macro <a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b" title="Macro permettant de tester si un ou plusieurs pointeurs sont NULL.">CHECK_NULL()</a>, qui indique dans le message la position de l'erreur dans le source. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#aa44a749b8ec174a5780a521e07b9b86b" title="Macro permettant de tester si un ou plusieurs pointeurs sont NULL.">CHECK_NULL()</a> </dd></dl>

</div>
</div>
<a id="a95dd19b1b2af33029f7ccb78d5f17039" name="a95dd19b1b2af33029f7ccb78d5f17039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95dd19b1b2af33029f7ccb78d5f17039">&#9670;&#160;</a></span>multiple_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void multiple_free </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction pour libérer de la mémoire en utilisant la fonction free(). </p>
<p>Appelle free sur un nombre variable d'arguments. Le dernier argument doit être NULL.</p>
<p>Exemple d'utilisation : </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> *p1, *p2, *p3;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_define" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p1, 10); <span class="comment">// Alloue un tableau de 10 int.</span></div>
<div class="line"><a class="code hl_define" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p2, 10);</div>
<div class="line"><a class="code hl_define" href="#ab1cd6d564a53c48b9fff06fc1b642a06">MALLOC</a>(p3, 10);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code hl_function" href="alloc_8c.html#a95dd19b1b2af33029f7ccb78d5f17039">multiple_free</a>(p1, p2, p3, NULL);</div>
<div class="ttc" id="aalloc_8c_html_a95dd19b1b2af33029f7ccb78d5f17039"><div class="ttname"><a href="alloc_8c.html#a95dd19b1b2af33029f7ccb78d5f17039">multiple_free</a></div><div class="ttdeci">void multiple_free(void *p,...)</div><div class="ttdoc">Fonction pour libérer de la mémoire en utilisant la fonction free().</div><div class="ttdef"><b>Definition</b> alloc.c:8</div></div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>Cette fonction est dangereuse et il faut savoir ce que vous faites si vous l'utilisez ! Les pointeurs à libérer <b>ne doivent pas</b> être NULL. Dans l'exemple précédent, si <code>p2</code> est NULL, on ne libère pas <code>p3</code> et cela peut créer une fuite mémoire. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="alloc_8h.html">alloc.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
